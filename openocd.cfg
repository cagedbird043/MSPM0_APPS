# === openocd.cfg (终极修正版) ===

# 1. 首先，加载 ST-Link 调试器接口的配置
# 这会让 OpenOCD 识别到你的 ST-Link 硬件。
source [find interface/stlink.cfg]

# 2. 接着，设置调试速度。
# adapter_khz 已被 adapter speed 取代，我们使用新的语法。
adapter speed 1000

# 3. 明确选择 SWD 传输方式。
# 这一行必须在 interface 配置之后，target 配置之前。
# 如果 stlink.cfg 内部也包含 transport select swd，
# 那么我们可能需要在 stlink.cfg 之后立即尝试覆盖或忽略它。
# 但通常 openocd 的 interface 脚本不会太早选择 transport，
# 而是等待 target 脚本来做。这里我们尝试最直接的写法。
transport select swd

# 4. 最后，加载 MSPM0 目标芯片的配置。
# 确保 ti_mspm0.cfg 和它所依赖的 mspm0.flash.cfg 都在项目根目录。
source [find ti_mspm0.cfg]

# 可选：显示更详细的调试信息
# debug_level 3
